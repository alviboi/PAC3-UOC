\documentclass[a4paper,12pt]{article}
\usepackage [catalan] {babel} 
\usepackage [latin1]{inputenc}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{framed}
\usepackage{color}
\definecolor{shadecolor}{RGB}{224,238,238}
\onehalfspacing

\begin{document}
\title{\textbf{PAC3 Control de Versions i Documentació}}
\author{Alfredo Rafael Vicente Boix}
\date{15 de desembre de 2015}
\maketitle
\pagebreak
\tableofcontents
\pagebreak
\section{Introducció}

Aquest document presenta les 3 parts de la pràctica realitzada de l'assignatura Desenvolupament de Programari de la Universitat Oberta de Catalunya. El document està format per dues parts on s'explica el procés i els pasos a seguir per resoldre els diferents problemes.\\
Al primer problema s'ha utilitzat la ferramenta git per a crear el repositori i github\footnote{https://github.com/alviboi/PAC3-UOC/} per a compartirlo.\\
El segon problema s'han utilitzat les etiquetes doxygen i el programa doxywizard per a poder formatar la documentació amb html.\\
\pagebreak
\section{Control de Versions}
En aquesta part hem decidit crear un Control de versions amb git i github, és epr això que el primer que hem fet és donar-nos d'alta a github i crear un repositori amb el nom de PAC3-UOC. D'aquesta manera el resultat de la nostre dipòsit serà compartit.\\
\includegraphics[width=\linewidth]{./images/pic11.png}\\
Donada la naturalesa de github el dipòsit pot ser públic o privat, en aquest cas hem decidit fer-lo públic, però podríem haver gestionat el projecte per a que fos provat i estigués compartit únicament amb el professor.\\
Evidentment per a treballar al nostre ordinador, el primer que hem de fer és instal·lar git al nostre ordinador:
\begin{center}
\emph{sudo apt-get install git}\\
\end{center}
Després passem el nostre dipòsit al nostre ordinador amb el següent comandament:\\
\includegraphics[width=\linewidth]{./images/pic12.png}\\
De manera que creem una còpia del dipòsit al nostre ordinador. De moment el dipòsit no té més que un arxiu README que github et crea automàticament.
Una vegada creada la còpia al nostre ordinador per a afegir arxius, en aquest cas els arxius filtres.c i filtres.h que es troben al directori libsrc, per tant hem de tenir en compte que en primer lloc hem de afegir-los al nostre repositori amb el comandament:
\begin{center}
\emph{git add --all ./libsrc/}
\end{center}
Això no significa que els arxius estiguen al nostre depòsit haurem d'afegir-los, amb un comentari. Pit resultar redundant, però d'aquesta manera pots afegir diversos arxius i posteriorment guardar-los tots de cop al dipòsit amb el comandament:
\begin{center}
\emph{git commit -m "Afegint documents"}
\end{center}
Podem veure l'exemple a la següent imatge:\\
\includegraphics[width=\linewidth]{./images/pic13.png}\\
Però, certament, si el que necessitem és que els arxius que hem modificat siguen accesibles per a tot el món que necessite treballar en el projecte, hem de pujar-los al nostre repositoris haurem de fer el següent:
\begin{center}
\emph{git push}
\end{center}
Així tots els arxius que tenim al nostre dipòsit local passaran a estar accesibles per a tot el món que desitge accedir a ells:\\
\includegraphics[width=\linewidth]{./images/pic14.png}\\
Com poden veure en aquest cas si que ens demanarà el nostre nom d'usuari i la nostra constrasenya, principalment per a poder portar un control de qui modifica cada arxiu.
Així, podrem aconseguir una còpia al nostre ordinador local sempre amb el commandament:
\begin{center}
\emph{git clone https://github.com/alviboi/PAC3-UOC.git}
\end{center}
De manera que sempre tindrem accessible el nostre projecte des de qualsevol ordinador. Podem veure com quedaria la pàgina del nostre projecte a github\footnote{Podem veure que els arxius que tenim són de les diferents preguntes que hem anat tractant, no només d'aquesta}.\\
\includegraphics[width=\linewidth]{./images/pic15.png}\\
Al nostre ordinador podem veure com tenim una còpia de tots els arxius que tenim al dipòsit. A més tenim una carpeta anomenada .git.\\
\includegraphics[width=\linewidth]{./images/pic16.png}\\
\pagebreak
\section{Documentació}
Per a la part de documentació hem utilitzat etiquetes doxygen en els comentaris que hem fet a cadascun dels arxius. Com a exemple mostrem l'encapçalament que hem fet per a l'arxiu filtres.c:
\begin{shaded}
/**\\
  \emph{\textbf{@file}} filtres.c\\
  \emph{\textbf{@brief}} Codi font de diferents funcions que serveixen per filtrar un text donat com a paràmetre d'entrada en format .txt.\\
	Les funcions són:\\	
	- void fs\_head( int fd ) Filtre que mostra les tres primeres línies de l'arxiu i ho mostra per pantalla. Les línies estan separades pel caràcter salt de línia.\\	
	- void fs\_wc( int fd ) Filtre que conta el nombre de caràcters, paraules i línies de l'arxiu d'entrada i ho mostra per pantalla.\\ 
	- void fs\_nl( int fd ) Filtre que numera les línies de l'entrada i ho trau per pantalla.\\
	- void fs\_cut( int fd, int col ) Filtre que mostra la paraula a la posició col de cada línia, la primera paraula de cada línia està a la posició 1, no 0.\\
  \emph{\textbf{@author}} Alfredo Rafael Vicente Boix i Eduardo César Galobardes \\
  \emph{\textbf{@date}} 14/12/2015\\
\/*/
\end{shaded}
Com podem veure el que hem fer és utilitzar les etiquetes doxygen que ens permeten especificar què estem explicant en cada punt, així per exemple:
\begin{center}
\begin{tabular}{ | c | c|}
  \hline
  \emph{@file} & Ens permet especificar quin fitxer estem tractant \\
  \hline 
  \emph{@brief} & Ens permet fer una breu descripció de l'arxiu\\
  \hline 
  \emph{@author} & Ací indiquem l'autor i/o autors de l'arxiu \\
  \hline 
  \emph{@date} & I finalment la data en que s'ha creat el document \\
  \hline 
\end{tabular}
\end{center}
De manera semblant en cadascuna de les funcions fem una xicoteta explicació de quin és el seu propòsit tot especificant.
\begin{shaded}
/**\\
\emph{\textbf{@brief}} Funció que imprimix per pantalla el número donat en el paràmetre d'entrada\\
Amb aquesta funció fem la reserva de memòria necessària per a posar en memòria els enters passats en el paràmetre d'entrada que s'alliberarà posteriorment. Després es crea una cadena de tipus "1. " que es passa per a ser escrita per pantalla. Si la funció presenta cap error es deixa d'executar i no s'allibera la memòria. Si es desitja modificar aquest punt es pot utilitzar la següent modificació:\\
\verb+\+verbatim\\
if(write( 1, nstr, strlen( nstr ) ) == -1)\{free (nstr); exit;\}\\
\verb+\+endverbatim\\
\emph{\textbf{@param}} num enter proporcionat per a ser escrit per pantalla.\\ 
\emph{\textbf{@returns}} void la funció no torna cap valor\\
 \/*/
\end{shaded}
Així les etiquetes que hem utilitzat per a documenar cadascuna de les funcions han sigut les seüents:
\begin{center}
\begin{tabular}{ | c | c|}
  \hline
  \emph{@file} & Ens permet fer una breu descripció de la funció. \\
  \hline 
  \emph{\//verbatim} & Ens permet incrustar codi per especificar alguna cosa.\\
  \hline 
  \emph{@param} & Ací expliquem els paràmetres d'entrada que rep la funció. \\
  \hline 
  \emph{@returns} & Ací els paràmetres de sortida, que en aquest cas és void.\\
  \hline 
\end{tabular}
\end{center} Com podem veure hi ha una apart de text que no està precedida per cap etiqueta, aquesta part és on anem a explicar detalladament quina és la finalitat de cada funció.\\
Una vegada tenim detallades totes les funcions i ambdós arxius, per a poder realitzar tota la documentació en format html, fer els enllaços a les altres operacions utilitzarem \emph{doxywizard}, na ferramenta que, a través d'un tutorial i especificant-li uns paràmetres ens permet generar tota a informació necessària.
Fins ara l'única cosa que hem fet és afegir etiquetes d'oxygen per a fer les explicacions, per a poder generar tota la informació, en primer lloc, haurem d'instal·lar els programes que anem a utilitzar, tant doxywizard com doxygen, per això executem:
\begin{center}
\emph{sudo apt-get install doxygen doxygen-gui}
\end{center}
Per a poder fer ús del programa, en primer lloc hem d'instal·lar i ens trobem amb la següent pantalla:\\
\includegraphics[width=\linewidth]{./images/pic21.png}
Podem veure com ja incloem el nom del projecte, el directorio on anem a traure el codi i les etiquetes doxygen, que és el qui es troba al nostre dipòsit\footnote{dintre de la carpeta libsrc}. A més especifiquem on volem que extraiga la documentació en format html.
A banda d'aquestes coses, hem hagut de modificar uns paràmetres a la pestanya Expert de doxywizard:\\
\includegraphics[width=\linewidth]{./images/pic22.png}
Hem hagut de modificar el paràmetre DOXYFILE\_ENCODING i el paràmetre OUTPUT\_LANGUAGE per a que ens puga reconèixer els accents del català i per a especificar en quina llengua està escrita la documentació.
Una vegada canviats els paràmetres ja només ens queda generar la documentació:\\
\includegraphics[width=\linewidth]{./images/pic23.png}
Hem de recordar que tot i que la documentació ha sigut generada dins de la carperta, dins del nostre dipòsit, fins que no fem un \emph{git add...} i després un \emph{git commit...} els arxius no es trobaran al dipòsit.
Per a poder accedir a la documentació creada anem al directori de treball i podem veure l'arxiu index.html, podem veure que el programa ha creat automàticament tots els enllaços i explcicacions, formatant la documentació per a que quedi d'una manera molt més visual i agradable:\\
\includegraphics[width=\linewidth]{./images/pic24.png}
\pagebreak
\section{Conclusions}
Aquesta pràctica ha resultat molt didàctica, ja que hem tractat dos punts fonamentals sobre la creació de programari i que sovint oblidem, que són el control de versions i la documentació que deu acompanyar a qualsevol projecte. En el nostre cas ens hem decantat per github, encara que puga resultar l'opció més senzilla, ja que de cara al projecte final de màster és el repositori amb el que el meu tutor de l'empresa li agrada treballar, encara que han alguns punts com al creació de branches o fer un merge per a fer proves abans d'incorporar-ho a la rama principal.
De tota manera hem creat també un repositori amb cvsd per a pdoer veure com es treballaria amb ell, ja que subversion l'hem tractat amb altres assignatures:\\
\includegraphics[width=\linewidth]{./images/pic31.png}
La part de documentació utilitzant doxygen, que és una ferramenta que no coneixia, m'ha semblat molt adequada encara que s'han hagut d'instal·lar alguns paquets adicionals per a que funcionara correctament. 
Hem de dir que les ferramentes utilitzades són ferramentes bastant testades i utilitzades i tenen una forta presència en el món de la programació. Per això no hem trobat grans problemes a l'hora de treballar amb elles, i anat tot bastant rodat. Probablement les majors dificultat les hem trobat generant el document \LaTeX\  que no coneixia. En realitat, al començar a redactar el document, resultava un tant enfarragós, però hem utilitzat el TeXstudio, que tot i que costa acostumar-te un poc al seu funcionament, una vegada agafes un poc de soltura, resulta una ferramenta mot útil i quasi imprescindible per a redactar els documents de caràcter oficial.
\pagebreak

\end{document}